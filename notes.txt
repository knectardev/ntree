
1) Low-pass filtering (trend level)

Does it make sense here? Yes — you already have it: smaRolling() is a low-pass filter. 

price

What you’d expose as “trend-only”:

trendLevel[i] = base[i] (SMA trend line)

Optionally also offer EMA (less lag than SMA)

Pros

Simple, stable, cheap

Great as a “don’t hallucinate cycles” baseline

Cons

Lag (especially if L is large)

Doesn’t explicitly give you “trend strength” (slope) unless you compute it

Fit to your UI: easiest toggle (“Trend: SMA/EMA”).

2) Local linear trend extraction (trend level + slope)

Does it make sense here? Very much yes — and it’s likely the most useful for your regime gating.

If your detrendRollingLinear() is doing “rolling linear regression residuals”, then internally it’s already computing a local line. The trend-only sibling is:

trendLevel[i] = fittedValueAtI (the regression line value at the right edge)

trendSlope[i] = slope (per bar or per minute)

Pros

Gives you direction + strength directly (slope)

Often better for “is there a real trend?” than SMA/EMA

Pairs naturally with your “trend vs cycle” gating logic

Cons

A bit more compute than SMA/EMA (still totally fine in JS for typical window sizes)

Needs care at the left edge / warmup (same as SMA)

Recommendation: If you add only one “trend-only” mode beyond SMA/EMA, make it this.